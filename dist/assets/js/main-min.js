const chatList=document.querySelector(".chat-list"),newChatsForm=document.querySelector(".new-chat"),newNameForm=document.querySelector(".new-name"),nameUpdatedMessage=document.querySelector(".update-mssg"),rooms=document.querySelector(".chat-rooms");newChatsForm.addEventListener("submit",e=>{e.preventDefault();const t=newChatsForm.message.value.trim();chatroom.addToChat(t).then(()=>newChatsForm.reset()).catch(e=>console.log(e))}),newNameForm.addEventListener("submit",e=>{e.preventDefault();const t=newNameForm.name.value.trim();chatroom.updateName(t),newNameForm.reset(),nameUpdatedMessage.innerText=`Your name was updated to ${t}`,setTimeout(()=>nameUpdatedMessage.innerText="",3e3)}),rooms.addEventListener("click",e=>{"BUTTON"===e.target.tagName&&(chatUI.clear(),chatroom.updateRoom(e.target.getAttribute("id")),chatroom.getChats(e=>chatUI.render(e)))});const username=localStorage.username?localStorage.username:"anon",chatUI=new ChatUI(chatList),chatroom=new Chatroom("general",username);chatroom.getChats(e=>chatUI.render(e));